<div class="bg-gradient-to-br from-white via-primary-50/60 to-purple-50/40 min-h-screen py-12">
  <div class="max-w-7xl mx-auto px-4 space-y-8" data-controller="calendar">
    <div class="bg-white rounded-3xl shadow-xl shadow-primary-900/5 border border-neutral-100 p-8">
      <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6">
        <div>
          <h1 class="text-3xl font-bold text-neutral-900 mb-2">All Events</h1>
          <p class="text-neutral-600">Manage your shared calendar</p>
        </div>
        <div>
          <%= link_to "Add new event", new_event_path, class: "btn-primary justify-center" %>
        </div>
      </div>
    </div>

    <div class="bg-white rounded-3xl shadow-lg shadow-primary-900/5 border border-neutral-100 p-6">
      <div class="flex gap-2 mb-4">
        <button type="button" data-action="click->calendar#switchView" data-view="list" class="px-4 py-2 rounded-xl text-sm font-medium transition-colors">
          List
        </button>
        <button type="button" data-action="click->calendar#switchView" data-view="month" class="px-4 py-2 rounded-xl text-sm font-medium transition-colors">
          Month
        </button>
        <button type="button" data-action="click->calendar#switchView" data-view="week" class="px-4 py-2 rounded-xl text-sm font-medium transition-colors">
          Week
        </button>
        <button type="button" data-action="click->calendar#switchView" data-view="day" class="px-4 py-2 rounded-xl text-sm font-medium transition-colors">
          Day
        </button>
      </div>

      <%= form_with url: events_path, method: :get, class: "grid grid-cols-1 md:grid-cols-4 gap-4 mt-4" do |f| %>
        <div>
          <%= f.select :filter, options_for_select([
            ["All events", ""],
            ["Upcoming", "upcoming"],
            ["Past", "past"],
            ["This week", "this_week"],
            ["Future", "future"]
          ], params[:filter]), {}, class: "w-full px-4 py-3 rounded-xl border border-neutral-200 focus:border-primary-400 focus:ring-2 focus:ring-primary-400 focus:ring-opacity-20 transition-colors" %>
        </div>

        <div>
          <%= f.text_field :category, value: params[:category], placeholder: "Filter by category", class: "w-full px-4 py-3 rounded-xl border border-neutral-200 focus:border-primary-400 focus:ring-2 focus:ring-primary-400 focus:ring-opacity-20 transition-colors" %>
        </div>

        <div>
          <%= f.date_field :start_date, value: params[:start_date], placeholder: "Start date", class: "w-full px-4 py-3 rounded-xl border border-neutral-200 focus:border-primary-400 focus:ring-2 focus:ring-primary-400 focus:ring-opacity-20 transition-colors" %>
        </div>

        <div>
          <%= f.date_field :end_date, value: params[:end_date], placeholder: "End date", class: "w-full px-4 py-3 rounded-xl border border-neutral-200 focus:border-primary-400 focus:ring-2 focus:ring-primary-400 focus:ring-opacity-20 transition-colors" %>
        </div>

        <div class="md:col-span-4">
          <%= f.submit "Apply filters", class: "btn-secondary md:self-end" %>
        </div>
      <% end %>

      <% if params[:filter].present? || params[:category].present? || params[:start_date].present? || params[:end_date].present? %>
        <%= link_to "Clear filters", events_path, class: "text-sm text-neutral-600 hover:text-primary-600 mt-2 inline-block" %>
      <% end %>
    </div>

    <div data-calendar-target="calendarView" class="hidden">
      <%= render "calendar", events: @events, view_mode: params[:view] || "month", current_date: @current_date %>
    </div>

    <div data-calendar-target="listView">
      <% if @events.any? %>
        <ul class="space-y-4">
          <% @events.each do |event| %>
            <%= render "event_item", event: event, show_link: true, compact: false %>
          <% end %>
        </ul>
      <% else %>
        <div class="bg-white rounded-2xl border-2 border-dashed border-neutral-200 p-12 text-center">
          <p class="text-neutral-500 mb-4">No events found. Create your first event!</p>
          <%= link_to "Create event", new_event_path, class: "btn-primary inline-flex" %>
        </div>
      <% end %>
    </div>
  </div>
</div>

